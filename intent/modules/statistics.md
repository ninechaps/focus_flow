# Statistics æ¨¡å— Intent

> æ•°æ®ç»Ÿè®¡ä¸å¯è§†åŒ–æ¨¡å—ï¼Œé‡åŒ–ç”¨æˆ·çš„ä¸“æ³¨æˆæœã€ä»»åŠ¡å®Œæˆæƒ…å†µå’Œç›®æ ‡è¿›åº¦ã€‚

çŠ¶æ€: draft
æœ€åæ›´æ–°: 2026-02-09

## èŒè´£

- ä¸“æ³¨æ—¶é•¿ç»Ÿè®¡ï¼ˆä»Šæ—¥ / æœ¬å‘¨ï¼‰
- ä»»åŠ¡å®Œæˆæ•°ç»Ÿè®¡
- è¿‘ 7 å¤©ä¸“æ³¨æ—¶é•¿æŸ±çŠ¶å›¾
- ä»»åŠ¡çŠ¶æ€åˆ†å¸ƒå¯è§†åŒ–ï¼ˆå †å æ¡å½¢å›¾ï¼‰
- ç›®æ ‡è¿›åº¦è¿½è¸ªï¼ˆè¿›åº¦æ¡ï¼‰

## éç›®æ ‡

- ä¸åšæ•°æ®å¯¼å‡º
- ä¸åšè·¨è®¾å¤‡æ•°æ®æ±‡æ€»
- ä¸åšæœˆåº¦/å¹´åº¦ç»Ÿè®¡ï¼ˆå½“å‰é˜¶æ®µï¼‰
- ä¸åšä¸“æ³¨ä¼šè¯ç²’åº¦çš„ç»Ÿè®¡ï¼ˆå½“å‰åŸºäºä»»åŠ¡çš„ focusDuration è®¡ç®—ï¼‰

## å¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Statistics                                   â”‚
â”‚  Track your productivity and progress         â”‚
â”‚                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ Today    â”‚ â”‚ This Weekâ”‚ â”‚ Completedâ”‚     â”‚
â”‚  â”‚ 2h 15m  â”‚ â”‚ 12h 30m â”‚ â”‚ 8        â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                               â”‚
â”‚  â”Œâ”€â”€â”€ Daily Focus (Last 7 Days) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  2h  1h  3h  0   2h  1h  4h            â”‚ â”‚
â”‚  â”‚  â–ˆâ–ˆ  â–ˆ   â–ˆâ–ˆâ–ˆ     â–ˆâ–ˆ  â–ˆ   â–ˆâ–ˆâ–ˆâ–ˆ           â”‚ â”‚
â”‚  â”‚  Mo  Tu  We  Th  Fr  Sa  Su             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                               â”‚
â”‚  â”Œâ”€â”€ Task Status â”€â”€â” â”Œâ”€â”€ Goal Progress â”€â”€â”€â”€â” â”‚
â”‚  â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘     â”‚ â”‚ ProjectA   3/5 60%  â”‚ â”‚
â”‚  â”‚ âœ… Completed: 5 â”‚ â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘          â”‚ â”‚
â”‚  â”‚ ğŸŸ¡ InProgress:3 â”‚ â”‚ ProjectB   1/3 33%  â”‚ â”‚
â”‚  â”‚ âšª Pending: 2   â”‚ â”‚ â–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æ•°æ®æµ

- ç›´æ¥æ¶ˆè´¹ `TaskProvider` çš„ tasksã€goalsã€subtasksMap
- æ‰€æœ‰ç»Ÿè®¡åœ¨ UI å±‚å®æ—¶è®¡ç®—ï¼Œä¸ä¾èµ–åç«¯èšåˆæŸ¥è¯¢

### è®¡ç®—é€»è¾‘

| æŒ‡æ ‡ | è®¡ç®—æ–¹å¼ |
|------|---------|
| ä»Šæ—¥ä¸“æ³¨ | æ‰€æœ‰ä»»åŠ¡ï¼ˆå«å­ä»»åŠ¡ï¼‰ä¸­ referenceDate == today çš„ focusDuration ä¹‹å’Œ |
| æœ¬å‘¨ä¸“æ³¨ | æ‰€æœ‰ä»»åŠ¡ä¸­ referenceDate åœ¨æœ€è¿‘ 7 å¤©çš„ focusDuration ä¹‹å’Œ |
| å·²å®Œæˆæ•° | é¡¶çº§ä»»åŠ¡ä¸­ status == completed çš„æ•°é‡ |
| æŸ±çŠ¶å›¾ | è¿‘ 7 å¤©æ¯å¤©çš„ focusDuration æ€»å’Œ |
| ä»»åŠ¡çŠ¶æ€ | é¡¶çº§ä»»åŠ¡ï¼ˆéåˆ é™¤ï¼‰æŒ‰ pending/inProgress/completed è®¡æ•° |
| ç›®æ ‡è¿›åº¦ | æ¯ä¸ªç›®æ ‡ä¸‹ completed/total çš„æ¯”ä¾‹ |

å…¶ä¸­ `referenceDate = task.completedAt ?? task.createdAt`

## æ—¥æœŸæ ¼å¼åŒ–

ä½¿ç”¨ `intl` åŒ…çš„ `DateFormat.E(locale)` ç”Ÿæˆ locale-aware çš„æ˜ŸæœŸç¼©å†™æ ‡ç­¾ã€‚

## API

æœ¬æ¨¡å—ä¸ºçº¯ UI å±‚ï¼Œä¸å®šä¹‰ç‹¬ç«‹çš„ Repositoryï¼Œæ•°æ®æ¥æºäºï¼š

```
TaskProvider
â”œâ”€â”€ tasks â†’ List<Task>
â”œâ”€â”€ goals â†’ List<Goal>
â””â”€â”€ subtasksMap â†’ Map<String, List<Task>>
```

### StatisticsPage å†…éƒ¨æ–¹æ³•

```
StatisticsPage (StatelessWidget)
â”œâ”€â”€ _formatDuration(totalSeconds) â†’ String      // ç§’ â†’ "2h 15m" æ ¼å¼
â”œâ”€â”€ _isSameDay(a, b) â†’ bool
â”œâ”€â”€ _weekdayLabel(date, locale) â†’ String        // locale-aware æ˜ŸæœŸç¼©å†™
â”œâ”€â”€ _allTasksIncludingSubtasks(tasks, subtasksMap) â†’ List<Task>
â”œâ”€â”€ _focusDurationForDay(allTasks, date) â†’ int  // æŒ‡å®šæ—¥æœŸçš„ä¸“æ³¨æ€»ç§’æ•°
â”œâ”€â”€ _buildBarChart(...) â†’ Widget
â”œâ”€â”€ _buildStatusCard(...) â†’ Widget
â””â”€â”€ _buildGoalProgress(...) â†’ Widget
```
